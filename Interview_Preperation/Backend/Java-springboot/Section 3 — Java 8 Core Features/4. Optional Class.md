# 1. What is `Optional`?

`Optional` is a **container object** which may or may not contain a non-null value.

It represents **“a value that might be absent”** without using `null`.

### Example:

```java
Optional<String> name = Optional.of("Java");
System.out.println(name.get());  // Java
```

---

# 2. Why was Optional introduced?

To solve **NullPointerException (NPE)** problems.

Before Java 8:

```java
String name = null;
System.out.println(name.length());  // NPE
```

With Optional:

```java
Optional<String> name = Optional.ofNullable(null);
System.out.println(name.orElse("Default"));
```

Advantages:

* Encourages safer null handling
* Makes API usage clearer
* Avoids excessive null checks

---

# 3. Difference Between `Optional.of()` and `Optional.ofNullable()`

### `Optional.of(value)`

❗ Value **must NOT** be null
❌ Throws NullPointerException if null

```java
Optional<String> opt = Optional.of("Hello");  // OK
Optional<String> opt2 = Optional.of(null);    // ❌ NPE
```

---

### `Optional.ofNullable(value)`

✔ Accepts null
✔ Returns `Optional.empty()` if value is null

```java
Optional<String> opt = Optional.ofNullable(null); // empty Optional
```

---

# 4. Difference Between `orElse()` and `orElseGet()`

### `orElse(value)`

**Always evaluates the value**, even if Optional has data.

```java
String result = name.orElse(getDefault());
```

### `orElseGet(Supplier)`

Evaluates only when Optional is empty (Lazy).

```java
String result = name.orElseGet(() -> getDefault());
```

### Example to show difference:

```java
String getDefault() {
    System.out.println("Default method called");
    return "Default";
}

Optional<String> opt = Optional.of("Hello");

opt.orElse(getDefault());        // getDefault() IS called ❗
opt.orElseGet(() -> getDefault()); // getDefault() NOT called ✔
```

---

# 5. When should you NOT use Optional?

❌ As a class field
❌ In setters/getters
❌ As method parameters
❌ Serialization (not recommended)
❌ In collections

Optional is best used **only as method return type**.

---

# 6. Is Optional serializable?

The Java Optional **class itself is NOT Serializable**.

This is why using Optional for class fields is discouraged.

---

# 7. Does Optional replace null checks everywhere?

❌ No.

Optional is meant for:

* Return types where absence of value is expected
* Avoiding explicit null checks

It should NOT replace null in:

* DTOs
* Entities
* Method arguments

---

# 8. Difference Between `isPresent()` and `ifPresent()`

### `isPresent()`

Returns true if value exists.

```java
if (opt.isPresent()) {
    System.out.println(opt.get());
}
```

---

### `ifPresent(Consumer)`

Executes action only when value exists (more functional style).

```java
opt.ifPresent(value -> System.out.println(value));
```

✔ Safer
✔ Avoids calling `.get()` manually

---

# 9. Can Optional Be Used as Method Parameters or Fields?

### Method Parameter? ❌ NO

Bad design — confusing and unnecessary.

### Class Field? ❌ Strongly discouraged

Because:

* Optional is not Serializable
* Causes Jackson/Hibernate issues
* Consumes memory unnecessarily

### Best Practice:

✔ Only use Optional as **return type**.

---

# 10. How Does Optional Help Avoid NullPointerException?

Instead of returning `null`, return `Optional.empty()`.

Example (before Optional):

```java
String getUsername(User user) {
    if (user == null || user.getName() == null)
        return "Guest";
    return user.getName();
}
```

Using Optional:

```java
Optional<User> user = Optional.ofNullable(getUser());

String name = user
                .map(User::getName)
                .orElse("Guest");
```

✔ No null check
✔ No risk of NPE

---

# ✅ Summary Table

| Question                      | Short Answer                                        |
| ----------------------------- | --------------------------------------------------- |
| What is Optional?             | Container for nullable value                        |
| Why introduced?               | Avoid NPE                                           |
| of() vs ofNullable()          | of() → no null allowed; ofNullable() → null allowed |
| orElse vs orElseGet           | orElse → always executes; orElseGet → lazy          |
| When not use Optional?        | Fields, parameters, DTOs                            |
| Serializable?                 | ❌ No                                                |
| Replace null?                 | ❌ Not everywhere                                    |
| isPresent vs ifPresent        | Boolean check vs functional action                  |
| Optional as method parameter? | ❌ Bad practice                                      |
| Prevents NPE?                 | ✔ Through functional pipelines                      |

---

