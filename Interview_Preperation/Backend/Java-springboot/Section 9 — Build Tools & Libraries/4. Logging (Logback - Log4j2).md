# ⭐ 1. Difference between Logback and Log4j2

| Feature                | **Logback**               | **Log4j2**                          |
| ---------------------- | ------------------------- | ----------------------------------- |
| Default in Spring Boot | ✔ Yes                     | ❌ No                                |
| Performance            | Good                      | **Excellent (faster)**              |
| Async logging          | Supported (AsyncAppender) | **High-performance LMAX Disruptor** |
| Configuration          | XML / Groovy              | XML / JSON / YAML                   |
| Hot reload             | Yes                       | Yes                                 |
| Maturity               | Older (by Log4j author)   | Newest and most optimized           |
| Plugins                | Limited                   | More extensible                     |
| Memory usage           | Medium                    | Lower under load                    |

**Bottom line:**
✔ Log4j2 = fastest, most scalable
✔ Logback = default, simple, stable

---

# ⭐ 2. What is SLF4J and why is it needed?

**SLF4J (Simple Logging Facade for Java)** is a **logging abstraction layer**.

It decouples your code from the logging framework.

### Why SLF4J?

Without SLF4J:

* If you switch from Log4j → Logback → JUL, you must rewrite code

With SLF4J:

```java
private static final Logger log = LoggerFactory.getLogger(MyClass.class);
log.info("Hello");
```

Behind the scenes:

* You can connect SLF4J to Logback or Log4j2 using adapters

✔ Makes logging framework-independent
✔ Cleaner, standard APIs

---

# ⭐ 3. Logging levels and their usage

| Level     | Usage                              |
| --------- | ---------------------------------- |
| **TRACE** | Detailed debugging, very low level |
| **DEBUG** | Debug information                  |
| **INFO**  | Normal flow, key checkpoints       |
| **WARN**  | Something unexpected but works     |
| **ERROR** | Failure that needs attention       |
| **FATAL** | System crash (Log4j2 only)         |

---

# ⭐ 4. How do you configure Logback?

File: **logback-spring.xml** (Spring Boot)

```xml
<configuration>

    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d %-5level [%thread] %logger - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="com.myapp" level="DEBUG" />

    <root level="INFO">
        <appender-ref ref="console" />
    </root>
</configuration>
```

---

# ⭐ 5. How do you configure Log4j2?

File: **log4j2-spring.xml**

```xml
<Configuration>
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%d %-5p [%t] %c - %m%n" />
        </Console>
    </Appenders>

    <Loggers>
        <Logger name="com.myapp" level="debug" additivity="false">
            <AppenderRef ref="Console"/>
        </Logger>

        <Root level="info">
            <AppenderRef ref="Console"/>
        </Root>
    </Loggers>
</Configuration>
```

---

# ⭐ 6. File appenders vs Console appenders

| Appender                               | Usage                                    |
| -------------------------------------- | ---------------------------------------- |
| **ConsoleAppender**                    | Print logs to console (dev environments) |
| **FileAppender / RollingFileAppender** | Write logs to files                      |
| **AsyncAppender**                      | Background thread writing logs           |
| **SocketAppender**                     | Send logs to remote server               |

Example Logback file appender:

```xml
<appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>app.log</file>
</appender>
```

---

# ⭐ 7. What is async logging?

Async logging uses a **background thread** to write logs.

✔ Application thread is not blocked
✔ Major performance improvement under heavy load
✔ Log4j2 uses LMAX Disruptor (super fast)

Example Log4j2 async:

```xml
<AsyncLogger name="com.myapp" level="debug"/>
```

---

# ⭐ 8. What is MDC (Mapped Diagnostic Context)?

MDC allows storing **per-thread key-value** info to include in logs.

Example:

```java
MDC.put("requestId", "ABC123");
log.info("Processing request");
MDC.clear();
```

Log pattern:

```
%d [%X{requestId}] %-5level %logger - %msg%n
```

Output:

```
2025-11-29 [ABC123] INFO com.myapp.Service - Processing request
```

Used for:
✔ Correlating logs in microservices
✔ Tracing request flow
✔ Logging user IDs

---

# ⭐ 9. How to log in multi-threaded applications?

Use MDC:

```java
Runnable task = () -> {
    MDC.put("thread", Thread.currentThread().getName());
    log.info("Task started");
    MDC.clear();
};
```

Avoid:

* Logging shared mutable objects
* Using System.out.println

Use thread-safe frameworks like Log4j2.

---

# ⭐ 10. What is log rolling policy?

Log rotation to avoid large log files.

Types:

* **Size-based rolling**
* **Time-based rolling**

Example Logback:

```xml
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>logs/app-%d{yyyy-MM-dd}.log</fileNamePattern>
    </rollingPolicy>
</appender>
```

---

# ⭐ 11. How do you manage logging in Spring Boot?

Spring Boot uses **Logback** by default.

### In application.properties:

```
logging.level.root=INFO
logging.level.com.myapp=DEBUG
logging.file.name=app.log
logging.pattern.console=%d %-5level [%thread] %logger - %msg%n
```

Switch to Log4j2:

* Add log4j2 dependency
* Remove logback dependency

---

# ⭐ 12. Difference between synchronous and asynchronous logging

| Sync Logging           | Async Logging                 |
| ---------------------- | ----------------------------- |
| App thread writes logs | Background thread writes logs |
| Slow under load        | Very fast                     |
| Blocking               | Non-blocking                  |
| Low throughput         | High throughput               |
| Default behavior       | Must be enabled               |

---

# ⭐ 13. How do you avoid logging sensitive data?

✔ Never log passwords, tokens, credit-card numbers
✔ Use filters/interceptors to mask sensitive fields
✔ Use custom logger wrappers
✔ Log encrypted or hashed values
✔ Validate log messages before logging
✔ Use `@JsonIgnore` for sensitive fields in serialized logs

Example:

```java
log.info("User logged in with email={}, password=****", email);
```

---

# ⭐ 14. How to debug logging configuration issues?

✔ Enable internal debugging

### Logback:

```
-Dlogback.debug=true
```

### Log4j2:

```
-Dorg.apache.logging.log4j.simplelog.StatusLogger.level=TRACE
```

✔ Check:

* Classpath conflicts
* Multiple logging configs
* Missing logback/log4j2 dependencies
* Wrong log level

---

# ⭐ 15. How do you enable different log levels for different packages?

In Logback:

```xml
<logger name="com.app.service" level="DEBUG"/>
<logger name="com.app.repository" level="WARN"/>
```

In Log4j2:

```xml
<Logger name="com.app.service" level="debug"/>
<Logger name="com.app.repository" level="warn"/>
```

In Spring Boot `application.properties`:

```
logging.level.com.app.service=DEBUG
logging.level.com.app.repository=WARN
```

---

# ⭐ Final Interview Summary

| Question             | Short Answer                        |
| -------------------- | ----------------------------------- |
| Logback vs Log4j2    | Log4j2 faster; Logback default      |
| SLF4J                | Logging abstraction layer           |
| Logging levels       | TRACE → DEBUG → INFO → WARN → ERROR |
| Configure Logback    | logback-spring.xml                  |
| Configure Log4j2     | log4j2-spring.xml                   |
| Appenders            | Console vs file                     |
| Async logging        | Non-blocking, faster                |
| MDC                  | Thread-local for storing context    |
| Multi-thread logging | Use MDC                             |
| Rolling policy       | Rotate logs (size/time)             |
| Spring Boot logging  | Configurable via properties         |
| Avoid sensitive logs | Mask/omit confidential data         |
| Debug logging        | Enable debug flags                  |
| Per-package logging  | Configure per package level         |

---

