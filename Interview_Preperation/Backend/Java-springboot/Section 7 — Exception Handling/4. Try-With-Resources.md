# **1. What is try-with-resources in Java 7+?**

`try-with-resources` is a Java feature that **automatically closes resources** (files, streams, sockets, DB connections) after use.

Syntax:

```java
try (Resource r = new Resource()) {
    // use resource
}
```

It eliminates the need for explicit `finally { r.close(); }`.

---

# **2. How does it help in resource management?**

✔ Prevents resource leaks
✔ Automatically calls `close()`
✔ No need for manual cleanup
✔ Less boilerplate
✔ Cleaner and safer code

---

# **3. Which interface must a class implement to be used in try-with-resources?**

### ✔ `AutoCloseable`

Any class implementing this can be used in TWR.

Example:

```java
class MyResource implements AutoCloseable {
    public void close() {
        System.out.println("Resource closed");
    }
}
```

---

# **4. Can we use custom resources in try-with-resources?**

✔ YES.
Any user-defined class implementing `AutoCloseable` qualifies.

Example:

```java
try (MyResource r = new MyResource()) {
    System.out.println("Using resource");
}
```

---

# **5. How does it handle suppressed exceptions?**

If:

* The `try` block throws an exception
  AND
* `close()` also throws an exception

→ Java **suppresses the close() exception**, attaches it to the main exception.

Example:

```java
class Demo implements AutoCloseable {
    public void close() throws Exception {
        throw new Exception("close() failed");
    }
}

try (Demo d = new Demo()) {
    throw new Exception("try failed");
} catch (Exception e) {
    System.out.println(e.getMessage()); // "try failed"
    for (Throwable t : e.getSuppressed())
        System.out.println("Suppressed: " + t);
}
```

Output:

```
try failed
Suppressed: java.lang.Exception: close() failed
```

---

# **6. Can we use multiple resources in try-with-resources?**

✔ YES.
Resources are closed in **reverse order** of creation.

Example:

```java
try (A a = new A(); B b = new B()) {
    // use resources
}
```

Close order:

```
b.close()
a.close()
```

---

# **7. Difference between finally and try-with-resources**

| Feature            | finally                          | try-with-resources    |
| ------------------ | -------------------------------- | --------------------- |
| Close resources?   | ❌ Manual                         | ✔ Automatic           |
| Boilerplate        | More code                        | Very clean            |
| Exception handling | Hard to handle suppressed errors | Automatically handled |
| Readability        | Lower                            | Higher                |
| Error-prone?       | Yes                              | No                    |

Example without TWR:

```java
FileReader fr = null;
try {
    fr = new FileReader("a.txt");
} finally {
    if (fr != null) fr.close();
}
```

With TWR:

```java
try (FileReader fr = new FileReader("a.txt")) { }
```

---

# **8. What is AutoCloseable interface?**

It is an interface with **one method**:

```java
public interface AutoCloseable {
    void close() throws Exception;
}
```

Classes implementing this can be placed inside TWR.

Common AutoCloseable classes:

* BufferedReader
* FileInputStream
* Connection
* PreparedStatement
* ResultSet

---

# **9. Order of closing resources in try-with-resources**

Resources close in **reverse order** of declaration.

Example:

```java
try (A a = new A();
     B b = new B();
     C c = new C()) { }
```

Closing order:

```
c.close()
b.close()
a.close()
```

Why?

* Prevent dependency issues
* Follows stack unwinding behavior

---

# **10. What happens if both try block and close() throw exceptions?**

✔ The **exception from try block wins**
✔ The exception from `close()` becomes **suppressed**

Example:

```java
try (Demo d = new Demo()) {
    throw new RuntimeException("try exception");
}
```

Final exception = `"try exception"`
Suppressed = `"close exception"`

Retrieve suppressed exceptions:

```java
e.getSuppressed()
```

---

# ⭐ Full Working Example

```java
class MyResource implements AutoCloseable {
    @Override
    public void close() throws Exception {
        System.out.println("Closing...");
        throw new Exception("Close error");
    }
}

public class TestTWR {
    public static void main(String[] args) {
        try (MyResource r = new MyResource()) {
            System.out.println("Using resource");
            throw new Exception("Main try error");
        } catch (Exception e) {
            System.out.println("Caught: " + e.getMessage());
            for (Throwable t : e.getSuppressed())
                System.out.println("Suppressed: " + t.getMessage());
        }
    }
}
```

Output:

```
Using resource
Closing...
Caught: Main try error
Suppressed: Close error
```

---

# ⭐ Final Interview Summary

| Question               | Short Answer                                   |
| ---------------------- | ---------------------------------------------- |
| try-with-resources     | Auto close resources                           |
| Helps resource mgmt    | Prevents leaks, cleans automatically           |
| Needed interface       | AutoCloseable                                  |
| Custom resources       | Yes                                            |
| Suppressed exceptions  | close() exception stored inside main exception |
| Multiple resources     | Yes, closed in reverse order                   |
| finally vs TWR         | TWR is cleaner, safer                          |
| AutoCloseable          | Interface with close()                         |
| Close order            | Reverse order of creation                      |
| try + close exceptions | try exception wins, close exception suppressed |

---

