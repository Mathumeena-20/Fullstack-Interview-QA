Here are **clean, production-level solutions + explanations + examples** for questions **36–45**.
These are the type of answers interviewers **love because they show real engineering skills**.

---

# ✅ **36. Write a function to debounce API calls**

Debounce ensures a function runs **only after the user stops triggering it** (e.g., typing in search box).

### ✔ Implementation

```js
function debounce(fn, delay) {
  let timer;

  return function (...args) {
    clearTimeout(timer);

    timer = setTimeout(() => {
      fn.apply(this, args);
    }, delay);
  };
}
```

### ✔ Usage

```js
function fetchResults(query) {
  console.log("API Call:", query);
}

const debouncedSearch = debounce(fetchResults, 300);

debouncedSearch("a");
debouncedSearch("ab");
debouncedSearch("abc"); // Only this triggers API after 300ms
```

---

# ✅ **37. Create a reusable `fetchWithRetry(url, retries)`**

Useful when APIs fail due to network issues.

### ✔ Implementation

```js
async function fetchWithRetry(url, retries = 3) {
  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error("HTTP Error " + response.status);
    return await response.json();

  } catch (err) {
    if (retries === 0) throw err;
    console.log("Retrying... attempts left:", retries);
    return fetchWithRetry(url, retries - 1);
  }
}
```

### ✔ Usage

```js
fetchWithRetry("/api/data", 3)
  .then(data => console.log(data))
  .catch(err => console.error("Failed:", err));
```

---

# ✅ **38. Flatten a nested array *without using recursion***

### ✔ Using a stack

```js
function flatten(arr) {
  const stack = [...arr];
  const result = [];

  while (stack.length) {
    const next = stack.pop();

    if (Array.isArray(next)) {
      stack.push(...next); // Push back elements
    } else {
      result.push(next);
    }
  }

  return result.reverse(); // Reverse to maintain order
}
```

### ✔ Usage

```js
console.log(flatten([1, [2, [3]]])); 
// [1, 2, 3]
```

---

# ✅ **39. Remove duplicates from an array of objects**

Keep only unique items by a key (e.g., id).

### ✔ Implementation

```js
function uniqueByKey(arr, key) {
  const seen = new Set();
  return arr.filter(obj => {
    if (seen.has(obj[key])) return false;
    seen.add(obj[key]);
    return true;
  });
}
```

### ✔ Usage

```js
const users = [
  { id: 1, name: "A" },
  { id: 2, name: "B" },
  { id: 1, name: "A2" },
];

console.log(uniqueByKey(users, "id"));
```

---

# ✅ **40. Convert array of objects into a lookup map**

Useful in e-commerce: fast lookup by id.

### ✔ Implementation

```js
function toMap(arr, key) {
  return arr.reduce((map, item) => {
    map[item[key]] = item;
    return map;
  }, {});
}
```

### ✔ Usage

```js
const products = [
  { id: 101, name: "Shoes" },
  { id: 102, name: "Bag" }
];

const productMap = toMap(products, "id");

console.log(productMap[101]); // { id:101, name:'Shoes' }
```

---

# ✅ **41. Deep clone an object (without JSON.parse)**

Handles:

* Dates
* Arrays
* Objects
* Maps
* Sets
* Functions

### ✔ Implementation

```js
function deepClone(value, visited = new WeakMap()) {

  if (value === null || typeof value !== "object") {
    return value; // primitive
  }

  if (visited.has(value)) return visited.get(value);

  // Dates
  if (value instanceof Date) return new Date(value);

  // Arrays
  if (Array.isArray(value)) {
    const result = [];
    visited.set(value, result);
    value.forEach((v, i) => result[i] = deepClone(v, visited));
    return result;
  }

  // Map
  if (value instanceof Map) {
    const result = new Map();
    visited.set(value, result);
    value.forEach((v, k) => result.set(k, deepClone(v, visited)));
    return result;
  }

  // Set
  if (value instanceof Set) {
    const result = new Set();
    visited.set(value, result);
    value.forEach(v => result.add(deepClone(v, visited)));
    return result;
  }

  // Objects
  const result = {};
  visited.set(value, result);
  for (let key in value) {
    result[key] = deepClone(value[key], visited);
  }
  return result;
}
```

### ✔ Usage

```js
const original = { a: 1, date: new Date(), nested: { b: 2 } };
const copy = deepClone(original);

console.log(copy);
```

---

# ✅ **42. Implement a custom event emitter**

Supports `on`, `off`, and `emit`.

### ✔ Implementation

```js
class EventEmitter {
  constructor() {
    this.events = {};
  }

  on(event, listener) {
    (this.events[event] || (this.events[event] = [])).push(listener);
  }

  off(event, listener) {
    if (!this.events[event]) return;
    this.events[event] = this.events[event].filter(l => l !== listener);
  }

  emit(event, ...args) {
    if (!this.events[event]) return;
    this.events[event].forEach(listener => listener(...args));
  }
}
```

### ✔ Usage

```js
const emitter = new EventEmitter();

function greet(name) {
  console.log("Hello " + name);
}

emitter.on("greet", greet);
emitter.emit("greet", "Mathu"); // Hello Mathu

emitter.off("greet", greet);
emitter.emit("greet", "Mathu"); // no output
```

---

# ✅ **43. Find the longest substring without repeating characters**

Classic sliding window.

### ✔ Implementation

```js
function longestSubstring(str) {
  let start = 0;
  let maxLen = 0;
  const seen = new Map();

  for (let end = 0; end < str.length; end++) {
    const char = str[end];

    if (seen.has(char) && seen.get(char) >= start) {
      start = seen.get(char) + 1;
    }

    seen.set(char, end);

    maxLen = Math.max(maxLen, end - start + 1);
  }

  return maxLen;
}
```

### ✔ Usage

```js
console.log(longestSubstring("abcabcbb")); // 3 ("abc")
```

---

# ✅ **44. Implement a polyfill for `Promise.all()`**

### ✔ Implementation

```js
Promise.myAll = function (promises) {
  return new Promise((resolve, reject) => {
    const results = [];
    let completed = 0;

    promises.forEach((p, i) => {
      Promise.resolve(p)
        .then(val => {
          results[i] = val;
          completed++;

          if (completed === promises.length) {
            resolve(results);
          }
        })
        .catch(reject);
    });
  });
};
```

### ✔ Usage

```js
Promise.myAll([Promise.resolve(1), Promise.resolve(2)])
  .then(console.log); // [1, 2]
```

---

# ✅ **45. Implement a polyfill for `Array.prototype.map()`**

### ✔ Implementation

```js
Array.prototype.myMap = function (callback, thisArg) {
  const result = [];

  for (let i = 0; i < this.length; i++) {
    if (this.hasOwnProperty(i)) {
      result.push(callback.call(thisArg, this[i], i, this));
    }
  }

  return result;
};
```

### ✔ Usage

```js
console.log([1, 2, 3].myMap(x => x * 2));
// [2, 4, 6]
```

---

