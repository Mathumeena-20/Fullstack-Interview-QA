## 🧱 **1️⃣ What are the different types of constraints in PostgreSQL?**

### ✅ **Definition:**

A **constraint** is a rule enforced on table data to ensure **data integrity and validity**.

### 🧩 **Types of Constraints:**

| Constraint Type | Description                                        | Example                                  |
| --------------- | -------------------------------------------------- | ---------------------------------------- |
| **PRIMARY KEY** | Uniquely identifies each record in a table.        | `id SERIAL PRIMARY KEY`                  |
| **FOREIGN KEY** | Ensures referential integrity between two tables.  | `dept_id INT REFERENCES departments(id)` |
| **UNIQUE**      | Ensures all values in a column are unique.         | `email TEXT UNIQUE`                      |
| **NOT NULL**    | Ensures a column cannot have NULL values.          | `name TEXT NOT NULL`                     |
| **CHECK**       | Ensures that all values meet a specific condition. | `salary NUMERIC CHECK (salary > 0)`      |
| **DEFAULT**     | Assigns a default value when none is provided.     | `status TEXT DEFAULT 'active'`           |

---

### 🧾 **Example:**

```sql
CREATE TABLE employees (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT UNIQUE,
  salary NUMERIC CHECK (salary > 0),
  status TEXT DEFAULT 'active',
  dept_id INT REFERENCES departments(id)
);
```

🧠 **Explanation:**

* `PRIMARY KEY` ensures each employee has a unique ID.
* `UNIQUE` ensures no duplicate emails.
* `CHECK` ensures no negative salary.
* `DEFAULT` sets the default status.
* `FOREIGN KEY` links `dept_id` to the `departments` table.

---

## 🔑 **2️⃣ What is the difference between a PRIMARY KEY and a UNIQUE KEY?**

| Feature          | PRIMARY KEY                          | UNIQUE KEY                          |
| ---------------- | ------------------------------------ | ----------------------------------- |
| Purpose          | Uniquely identifies each record      | Ensures column has unique values    |
| Null Values      | Not allowed                          | Allowed (only one NULL per column)  |
| Number per Table | Only one                             | Multiple unique constraints allowed |
| Index            | Automatically creates a unique index | Also creates a unique index         |
| Default Naming   | `tablename_pkey`                     | `tablename_columnname_key`          |

---

### 🧾 **Example:**

```sql
CREATE TABLE users (
  user_id SERIAL PRIMARY KEY,
  email TEXT UNIQUE,
  phone TEXT UNIQUE
);
```

🧠 **Explanation:**

* `user_id` → unique and non-null (primary key).
* `email` and `phone` → can be NULL but must be unique when present.
* You can have **only one primary key**, but **many unique keys**.

---

## 🔗 **3️⃣ What are foreign keys and how do you define them?**

### ✅ **Definition:**

A **foreign key (FK)** is a constraint that links one table to another — ensuring **referential integrity** (no orphan records).

### 🧩 **Example:**

```sql
CREATE TABLE departments (
  id SERIAL PRIMARY KEY,
  name TEXT
);

CREATE TABLE employees (
  id SERIAL PRIMARY KEY,
  name TEXT,
  dept_id INT REFERENCES departments(id)
);
```

🧠 **Explanation:**

* `dept_id` in `employees` must match an `id` in `departments`.
* Prevents adding an employee with a non-existent department.
* Also prevents deleting a department if employees are still linked (unless handled with actions).

---

### 💡 **Alternative Syntax (Explicit):**

```sql
CREATE TABLE employees (
  id SERIAL PRIMARY KEY,
  name TEXT,
  dept_id INT,
  CONSTRAINT fk_department FOREIGN KEY (dept_id)
    REFERENCES departments(id)
);
```

---

## ⚙️ **4️⃣ What is the difference between ON DELETE CASCADE and ON DELETE SET NULL?**

| Action                 | Behavior                                                                           |
| ---------------------- | ---------------------------------------------------------------------------------- |
| **ON DELETE CASCADE**  | When a parent row is deleted, child rows referencing it are automatically deleted. |
| **ON DELETE SET NULL** | When a parent row is deleted, the foreign key in the child table is set to `NULL`. |

---

### 🧾 **Example:**

```sql
CREATE TABLE departments (
  id SERIAL PRIMARY KEY,
  name TEXT
);

CREATE TABLE employees (
  id SERIAL PRIMARY KEY,
  name TEXT,
  dept_id INT,
  CONSTRAINT fk_department
    FOREIGN KEY (dept_id)
    REFERENCES departments(id)
    ON DELETE CASCADE
);
```

🧠 **Explanation:**

* If you delete a row from `departments`,
  → all employees in that department will be automatically deleted.

**Example for SET NULL:**

```sql
CREATE TABLE employees (
  id SERIAL PRIMARY KEY,
  name TEXT,
  dept_id INT,
  CONSTRAINT fk_department
    FOREIGN KEY (dept_id)
    REFERENCES departments(id)
    ON DELETE SET NULL
);
```

🧠 **Explanation:**
If a department is deleted, `dept_id` for its employees becomes `NULL`.

---

### 🧩 **Quick Test Example:**

```sql
DELETE FROM departments WHERE id = 1;
```

* With `CASCADE` → employee records with `dept_id = 1` are deleted.
* With `SET NULL` → those employees remain, but `dept_id` becomes NULL.

---

## 🔧 **5️⃣ How can you drop a constraint from a table?**

### ✅ **General Syntax:**

```sql
ALTER TABLE table_name DROP CONSTRAINT constraint_name;
```

### 💡 **Example:**

```sql
ALTER TABLE employees DROP CONSTRAINT fk_department;
```

🧠 **Explanation:**
This removes the foreign key relationship between `employees` and `departments`.

---

### 💡 **Drop Specific Constraint Types:**

**Drop Primary Key:**

```sql
ALTER TABLE employees DROP CONSTRAINT employees_pkey;
```

**Drop Unique Constraint:**

```sql
ALTER TABLE users DROP CONSTRAINT users_email_key;
```

**Drop Check Constraint:**

```sql
ALTER TABLE employees DROP CONSTRAINT employees_salary_check;
```

---

### 🧠 **How to Find Constraint Names:**

```sql
SELECT constraint_name, constraint_type, table_name
FROM information_schema.table_constraints
WHERE table_name = 'employees';
```

---

## 🧾 **Summary Table:**

| Concept         | Keyword                           | Example                                                |
| --------------- | --------------------------------- | ------------------------------------------------------ |
| Primary Key     | `PRIMARY KEY`                     | `id SERIAL PRIMARY KEY`                                |
| Unique          | `UNIQUE`                          | `email TEXT UNIQUE`                                    |
| Not Null        | `NOT NULL`                        | `name TEXT NOT NULL`                                   |
| Check           | `CHECK`                           | `salary > 0`                                           |
| Default         | `DEFAULT`                         | `status DEFAULT 'active'`                              |
| Foreign Key     | `FOREIGN KEY ... REFERENCES`      | `dept_id REFERENCES departments(id)`                   |
| Drop Constraint | `ALTER TABLE ... DROP CONSTRAINT` | `ALTER TABLE employees DROP CONSTRAINT fk_department;` |
