## üß† 1. What is JDBC and its components?

**Definition:**
JDBC (Java Database Connectivity) is an API that allows Java applications to **connect and interact with databases**.

**Main Components:**

1. **DriverManager** ‚Äì Manages JDBC drivers and database connections.
2. **Connection** ‚Äì Represents a connection session with the database.
3. **Statement / PreparedStatement / CallableStatement** ‚Äì Used to execute SQL queries.
4. **ResultSet** ‚Äì Holds the data retrieved from a SELECT query.
5. **SQLException** ‚Äì Handles database-related exceptions.

**Architecture Diagram (Simplified):**

```
Java Application
      ‚Üì
JDBC API
      ‚Üì
JDBC Driver
      ‚Üì
Database
```

---

## ‚öôÔ∏è 2. Steps to connect to a database using JDBC

Here‚Äôs the **5-step process** üëá

1Ô∏è‚É£ **Load the driver class**
2Ô∏è‚É£ **Establish a connection**
3Ô∏è‚É£ **Create a statement**
4Ô∏è‚É£ **Execute query**
5Ô∏è‚É£ **Close connection**

**Example (MySQL):**

```java
import java.sql.*;

public class JDBCExample {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/testdb";
        String user = "root";
        String password = "root";

        try {
            // 1. Load Driver (optional since JDBC 4.0)
            Class.forName("com.mysql.cj.jdbc.Driver");

            // 2. Establish Connection
            Connection con = DriverManager.getConnection(url, user, password);

            // 3. Create Statement
            Statement stmt = con.createStatement();

            // 4. Execute Query
            ResultSet rs = stmt.executeQuery("SELECT * FROM employees");

            // 5. Process Result
            while (rs.next()) {
                System.out.println(rs.getInt("id") + " - " + rs.getString("name"));
            }

            // 6. Close
            rs.close();
            stmt.close();
            con.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

‚úÖ **Output (example):**

```
1 - Mathu
2 - Anu
3 - Ben
```

---

## üìÑ 3. Statement vs PreparedStatement

| Feature       | Statement                        | PreparedStatement                |
| ------------- | -------------------------------- | -------------------------------- |
| SQL Query     | Hardcoded                        | Parameterized                    |
| Performance   | Slower (recompiled each time)    | Faster (precompiled)             |
| SQL Injection | Vulnerable                       | Safe                             |
| Use Case      | Simple queries                   | Dynamic inputs                   |
| Example       | `"SELECT * FROM emp WHERE id=1"` | `"SELECT * FROM emp WHERE id=?"` |

**Example:**

### ‚ùå Using Statement (Not Recommended)

```java
String query = "SELECT * FROM users WHERE name='" + username + "'";
Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(query);
```

If `username = "admin' OR '1'='1"`, ‚Üí **SQL Injection** risk.

---

### ‚úÖ Using PreparedStatement (Recommended)

```java
String query = "SELECT * FROM users WHERE name = ?";
PreparedStatement ps = con.prepareStatement(query);
ps.setString(1, username); // safely binds the value
ResultSet rs = ps.executeQuery();
```

This avoids SQL injection because parameters are **escaped safely**.

---

## üîç 4. Difference between executeQuery() and executeUpdate()

| Method            | Used For               | Returns               | Example                                                        |
| ----------------- | ---------------------- | --------------------- | -------------------------------------------------------------- |
| `executeQuery()`  | SELECT                 | `ResultSet`           | `ResultSet rs = stmt.executeQuery("SELECT * FROM emp");`       |
| `executeUpdate()` | INSERT, UPDATE, DELETE | `int` (rows affected) | `int rows = stmt.executeUpdate("DELETE FROM emp WHERE id=1");` |

**Example:**

```java
int count = stmt.executeUpdate("UPDATE employees SET name='John' WHERE id=1");
System.out.println(count + " record(s) updated");

ResultSet rs = stmt.executeQuery("SELECT * FROM employees");
while (rs.next()) {
    System.out.println(rs.getString("name"));
}
```

‚úÖ **Output:**

```
1 record(s) updated
John
```

---

## üõ°Ô∏è 5. How to Prevent SQL Injection

**SQL Injection** happens when user input manipulates SQL queries.

**Example of vulnerable code:**

```java
String query = "SELECT * FROM users WHERE username='" + input + "'";
```

‚úÖ **Prevention Techniques:**

1. Use **PreparedStatement** instead of `Statement`
2. Use **input validation**
3. Apply **ORM frameworks** like Hibernate or JPA
4. Use **stored procedures** if applicable

**Safe Example:**

```java
PreparedStatement ps = con.prepareStatement("SELECT * FROM users WHERE username=? AND password=?");
ps.setString(1, username);
ps.setString(2, password);
ResultSet rs = ps.executeQuery();
```

---

## üåÄ 6. What is Connection Pooling?

**Definition:**
Connection pooling is a technique where a **pool of reusable database connections** is maintained, instead of creating a new one every time (which is expensive).

**Why needed:**

* Creating connections is slow and resource-heavy.
* Reusing improves performance and scalability.

**Popular connection pool libraries:**

* HikariCP (default in Spring Boot)
* Apache DBCP
* C3P0

**Example using HikariCP:**

```java
import com.zaxxer.hikari.*;
import java.sql.*;

public class ConnectionPoolDemo {
    public static void main(String[] args) throws Exception {
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl("jdbc:mysql://localhost:3306/testdb");
        config.setUsername("root");
        config.setPassword("root");

        HikariDataSource ds = new HikariDataSource(config);

        try (Connection con = ds.getConnection()) {
            PreparedStatement ps = con.prepareStatement("SELECT * FROM employees");
            ResultSet rs = ps.executeQuery();

            while (rs.next()) {
                System.out.println(rs.getString("name"));
            }
        }
    }
}
```

‚úÖ Here, the connection is borrowed from the pool and returned after use.

---

## üßæ Summary Table

| Concept                  | Description                                         | Example                             |
| ------------------------ | --------------------------------------------------- | ----------------------------------- |
| JDBC                     | API for DB connection                               | `DriverManager`, `Connection`, etc. |
| Connection Steps         | 1. Load Driver ‚Üí 2. Connect ‚Üí 3. Execute ‚Üí 4. Close | JDBCExample                         |
| Statement                | Simple SQL, prone to injection                      | `stmt.executeQuery()`               |
| PreparedStatement        | Parameterized, safe                                 | `ps.setString(1, "name")`           |
| executeQuery()           | SELECT                                              | Returns `ResultSet`                 |
| executeUpdate()          | INSERT/UPDATE/DELETE                                | Returns affected rows               |
| SQL Injection Prevention | Use PreparedStatement                               | ‚úÖ Safe                              |
| Connection Pooling       | Reuse DB connections                                | HikariCP                            |
